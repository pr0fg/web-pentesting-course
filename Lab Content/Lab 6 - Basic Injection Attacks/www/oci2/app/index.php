<?php

$result = '';

if(isset($_POST['Submit']) && isset($_REQUEST['email'])) {

    $email = $_REQUEST['email'];

    $substitutions = array(
        '&&' => '',
        '&' => '',
        ';'  => '',
        '`' => '',
        '$' => '',
        '>' => '',
        '(' => '',
        ')' => '',
        '\'' => '',
        '"' => ''
    );

    $email = str_replace(array_keys($substitutions), $substitutions, $email);
    $cmd = 'mail -f email.template -s "Password Reset" ' . $email; 
    shell_exec('mail -f email.template -s "Password Reset" ' . $email);
    $result = "<b>Command debug:</b> " . $cmd . "<br/><br/>Email sent!";
}

?>

<!DOCTYPE html>
<html>
<body>
    <h1>Password Reset</h1>
    <form name="reset" action="" method="post">
        <p>
            Enter an email address:
            <input type="text" name="email" size="15">
            <input type="submit" name="Submit" value="Submit">
        </p>
    </form>
    <pre><?php echo "$result"; ?></pre>
</body>
</html>