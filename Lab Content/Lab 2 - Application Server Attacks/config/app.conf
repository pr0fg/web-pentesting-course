<VirtualHost *:80>

  ServerAdmin admin@localhost
  ServerName JoesBlog
  DocumentRoot /var/www/app

 <Directory /var/www/app>

    Options Indexes FollowSymLinks
    AllowOverride None
    AddDefaultCharset utf-8
    DirectoryIndex index.php
    Require all granted

    <IfModule mod_rewrite.c>
        RewriteEngine On

        # Merge slashes "//" to "/"
        RewriteCond %{THE_REQUEST} .*\ (.*)//(.*)\ HTTP/
        RewriteRule .* %1/%2 [R=301,L]

        # Redirect /index.php to /
        RewriteCond %{THE_REQUEST} ^.*\ /index\.(?:php|htm|html)(\?.*)?\ HTTP/
        RewriteRule ^.*$ /%1 [R=301,L]

        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.php [L]
    </IfModule>

  </Directory>

  Alias /webdav /var/www/webdav

  <Directory /var/www/webdav>
    DAV On
    Header set Access-Control-Allow-Origin "*"
    AuthType Digest
    AuthName "webdav"
    AuthDigestDomain /webdav/
    AuthDigestProvider file
    AuthUserFile /var/www/webdav/passwd.dav
    Require valid-user
  </Directory>

</VirtualHost>